{"ast":null,"code":"import { createElement as _createElement } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\cookbook-app\\\\cookbook-app\\\\src\\\\components\\\\recipes\\\\recipesList\\\\RecipesList.js\";\nimport React, { Component } from \"react\";\nimport { fetchAllRecipes, MakeFavourite, RemoveFavourite } from \"../../../redux/reducers/recipesReducer\";\nimport { IsLoggedIn } from \"../../../utility/generalMethods\";\nimport SingleRecipe from \"../SingleRecipe/SingleRecipe\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\"; // import { getSingleRecipe } from \"../../../redux/reducers/recipesReducer\";\n\nimport \"./Styles.scss\";\n\nclass RecipesList extends Component {\n  constructor(props) {\n    super(props);\n    this.history = this.props.history;\n    this.dispatch = this.props.dispatch;\n\n    this.onSearch = e => {\n      this.setState({\n        searchText: e.target.value\n      });\n      let updatedRecipes = this.props.recipes;\n      updatedRecipes = updatedRecipes.filter(item => {\n        return item.name.toLowerCase().search(e.target.value.toLowerCase()) !== -1;\n      });\n      this.setState({\n        filteredRecipes: updatedRecipes\n      });\n    };\n\n    this.toggleFavourite = id => {\n      const recipes = this.state.filteredRecipes; //FIRST METHOD TO FIND FAVOURITES\n\n      if (recipes && recipes.length) {\n        let Index = recipes.findIndex(val => val.id == id);\n\n        if (recipes[Index]) {\n          const {\n            isFavourite\n          } = recipes[Index];\n\n          if (isFavourite) {\n            this.props.RemoveFavourite(recipes[Index], id);\n          } else {\n            this.props.MakeFavourite(recipes[Index], id);\n          }\n\n          recipes[Index] = { ...recipes[Index],\n            isFavourite: !isFavourite\n          };\n          this.setState({\n            filteredRecipes: [...recipes]\n          });\n        }\n      }\n    };\n\n    this.loadRecipes = async () => {\n      await this.props.fetchingAllRecipes();\n\n      if (this.props.recipes && this.props.recipes.length) {\n        this.setState({\n          filteredRecipes: [...this.props.recipes]\n        });\n      }\n    };\n\n    this.handleRedirection = id => {\n      this.history.push(`/recipes/view/${id}`);\n    };\n\n    this.state = {\n      searchText: \"\",\n      filteredRecipes: []\n    };\n  }\n\n  componentDidMount() {\n    if (!IsLoggedIn()) {\n      this.history.push(\"/auth/login\");\n    }\n\n    this.loadRecipes();\n  }\n\n  render() {\n    const {\n      recipes,\n      Api\n    } = this.props;\n    let {\n      searchText,\n      filteredRecipes\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"row search-bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"bannerImgWrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"../../images/login_banner.jpg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"fa fa-search form-control-feedback\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            placeholder: \"Search\",\n            onChange: this.onSearch,\n            value: searchText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recipes main\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"heading\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"float-left\",\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Recipes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"float-right\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"add-recipe-button\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: e => this.history.push(\"/recipes/add\"),\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `${process.env.PUBLIC_URL}/images/plus.png`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [Api.isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n            class: \"loading-text\",\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 30\n          }, this) : null, filteredRecipes.length == 0 && !Api.isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No Records Found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 15\n          }, this) : filteredRecipes.map((recipe, idx) => {\n            return /*#__PURE__*/_createElement(SingleRecipe, { ...recipe,\n              toggleFavourite: this.toggleFavourite,\n              key: idx,\n              onClick: this.handleRedirection,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 19\n              }\n            });\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    recipes: state.recipes.recipes,\n    hasRecipes: state.recipes.hasRecipes,\n    Api: state.Api\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  fetchingAllRecipes: () => dispatch(fetchAllRecipes()),\n  MakeFavourite: (recipe, id) => {\n    return dispatch(MakeFavourite(recipe, id));\n  },\n  RemoveFavourite: (recipe, id) => dispatch(RemoveFavourite(recipe, id))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(RecipesList));","map":{"version":3,"sources":["E:/cookbook-app/cookbook-app/src/components/recipes/recipesList/RecipesList.js"],"names":["React","Component","fetchAllRecipes","MakeFavourite","RemoveFavourite","IsLoggedIn","SingleRecipe","connect","withRouter","RecipesList","constructor","props","history","dispatch","onSearch","e","setState","searchText","target","value","updatedRecipes","recipes","filter","item","name","toLowerCase","search","filteredRecipes","toggleFavourite","id","state","length","Index","findIndex","val","isFavourite","loadRecipes","fetchingAllRecipes","handleRedirection","push","componentDidMount","render","Api","process","env","PUBLIC_URL","isLoading","map","recipe","idx","mapStateToProps","hasRecipes","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  fetchAllRecipes,\n  MakeFavourite,\n  RemoveFavourite,\n} from \"../../../redux/reducers/recipesReducer\";\nimport { IsLoggedIn } from \"../../../utility/generalMethods\";\nimport SingleRecipe from \"../SingleRecipe/SingleRecipe\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\n// import { getSingleRecipe } from \"../../../redux/reducers/recipesReducer\";\n\nimport \"./Styles.scss\";\n\nclass RecipesList extends Component {\n  history = this.props.history;\n  dispatch = this.props.dispatch;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchText: \"\",\n      filteredRecipes: [],\n    };\n  }\n\n  onSearch = (e) => {\n    this.setState({\n      searchText: e.target.value,\n    });\n\n    let updatedRecipes = this.props.recipes;\n\n    updatedRecipes = updatedRecipes.filter((item) => {\n      return (\n        item.name.toLowerCase().search(e.target.value.toLowerCase()) !== -1\n      );\n    });\n\n    this.setState({ filteredRecipes: updatedRecipes });\n  };\n\n  toggleFavourite = (id) => {\n    const recipes = this.state.filteredRecipes;\n\n    //FIRST METHOD TO FIND FAVOURITES\n    if (recipes && recipes.length) {\n      let Index = recipes.findIndex((val) => val.id == id);\n\n      if (recipes[Index]) {\n        const { isFavourite } = recipes[Index];\n\n        if (isFavourite) {\n          this.props.RemoveFavourite(recipes[Index], id);\n        } else {\n          this.props.MakeFavourite(recipes[Index], id);\n        }\n\n        recipes[Index] = { ...recipes[Index], isFavourite: !isFavourite };\n\n        this.setState({\n          filteredRecipes: [...recipes],\n        });\n      }\n    }\n  };\n\n  componentDidMount() {\n    if (!IsLoggedIn()) {\n      this.history.push(\"/auth/login\");\n    }\n\n    this.loadRecipes();\n  }\n\n  loadRecipes = async () => {\n    await this.props.fetchingAllRecipes();\n\n    if (this.props.recipes && this.props.recipes.length) {\n      this.setState({\n        filteredRecipes: [...this.props.recipes],\n      });\n    }\n  };\n\n  handleRedirection = (id) => {\n    this.history.push(`/recipes/view/${id}`);\n  };\n\n  render() {\n    const { recipes, Api } = this.props;\n\n    let { searchText, filteredRecipes } = this.state;\n\n    return (\n      <React.Fragment>\n        <header className=\"row search-bar\">\n          <div class=\"bannerImgWrapper\">\n            <img src=\"../../images/login_banner.jpg\" />\n          </div>\n\n          <div className=\"form-group\">\n            <span className=\"fa fa-search form-control-feedback\"></span>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"Search\"\n              onChange={this.onSearch}\n              value={searchText}\n            />\n          </div>\n        </header>\n        <div className=\"recipes main\">\n          <div className=\"heading\">\n            <span className=\"float-left\">\n              <h3>Recipes</h3>\n            </span>\n            <div className=\"float-right\">\n              <span className=\"add-recipe-button\">\n                <button onClick={(e) => this.history.push(\"/recipes/add\")}>\n                  <img src={`${process.env.PUBLIC_URL}/images/plus.png`} />\n                </button>\n              </span>\n            </div>\n          </div>\n          <ul>\n            {Api.isLoading ? <p class=\"loading-text\">Loading...</p> : null}\n            {filteredRecipes.length == 0 && !Api.isLoading ? (\n              <p>No Records Found</p>\n            ) : (\n              filteredRecipes.map((recipe, idx) => {\n                return (\n                  <SingleRecipe\n                    {...recipe}\n                    toggleFavourite={this.toggleFavourite}\n                    key={idx}\n                    onClick={this.handleRedirection}\n                  />\n                );\n              })\n            )}\n          </ul>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    recipes: state.recipes.recipes,\n    hasRecipes: state.recipes.hasRecipes,\n    Api: state.Api,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  fetchingAllRecipes: () => dispatch(fetchAllRecipes()),\n  MakeFavourite: (recipe, id) => {\n    return dispatch(MakeFavourite(recipe, id));\n  },\n  RemoveFavourite: (recipe, id) => dispatch(RemoveFavourite(recipe, id)),\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withRouter(RecipesList));\n"]},"metadata":{},"sourceType":"module"}